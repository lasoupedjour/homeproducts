<!--div class="container">
  <div class="row mt-5">
    <div class="col-12 mt-1">
      <h2 class="alert-danger px-2">{{_global.appstatus.mensaje}}</h2>
    </div>
  </div>
</div-->


<div class="container fM2 menuadmin">
  <div class="row">
    <div class="offset-sm-6 col-sm-2 text-center">
      <a routerLink="/administracion/inicio/" *ngIf="_global.user.nivel == 'administrador'">Resumen de Servicios</a>
      <a routerLink="/administracion/resumen-de-servicios/" *ngIf="_global.user.IDMaster == '0' && _global.user.nivel == 'operador'">Resumen de Servicios</a>
    </div>
    <div class="col-sm-2 text-center" *ngIf="this._global.user.nivel!='distribuidor'">
      <a routerLink="/administracion/resumen-de-cambios-hp/" *ngIf="_global.user.nivel == 'administrador'">Resumen de Cambios</a>
      <a routerLink="/administracion/resumen-de-cambios/" *ngIf="_global.user.IDMaster == '0' && _global.user.nivel == 'operador'">Resumen de Cambios</a>
    </div>
    <div class="col-sm-2 text-center active" *ngIf="this._global.user.nivel!='distribuidor'">
      <a routerLink="/administracion/historial-de-pagos/">Resumen de Pagos</a>
    </div>
    <!--<div class="col-sm-2 text-center">
      <a routerLink="/administracion/servicios-red/">Servicios Red</a>
    </div>-->
  </div>
</div>




 <div class="container">


   <div class="row mt-3">
     <div class="col-6">
       <h2>RESUMEN DE PAGOS</h2>
     </div>
   </div>

   <div class="row mt-3">
      <div class="col-1 text-center">
        <i class="fa fa-building fa-2x"></i>
      </div>
      <div class="col-4 fM">
      {{this._global.user.NombreCentro}}<br>
      PAIS: {{this._global.user.Pais}}<br>
      </div>

      <div class="col-4">
        DIRECCIÓN: {{this._global.user.Direccion}}<br>
        TELÉFONOS: {{this._global.user.Telefono1}} {{this._global.user.Telefono2}} {{this._global.user.Telefono3}}<br>
        RED: {{this._global.user.Red}}<br>
      </div>

      <div class="col-3 fM3">
        <!--h5>Monto Total: <strong>{{montoTotal|currency}} USD</strong></h5-->
        <!--div class="row">
          <div class="col-12">
            <h5><strong>Monto Total: ${{montoTotal}} USD</strong></h5>
          </div>
        </div-->
        <!--div class="row">
          <div class="col-12">
            <h5><strong>Status: {{statusPago}}</strong></h5>
          </div>
        </div-->
      </div>
   </div>
   <!--form  name="formulariofiltros" [formGroup]="filterForm" >
   <div class="row mt-3">
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Pais" (change)="changePais()" hidden>
         <option value="" hidden="">País</option>
         <option *ngFor="let item of _global.paises;" value="{{item.Pais}}">{{item.Pais}}</option>
       </select>
     </div>
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Master" id="master" (change)="changeMaster()" hidden>
         <option value="" hidden>Master</option>
       </select>
     </div>
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Cds" id="centros" hidden>
         <option value="" hidden>CDS</option>
       </select>
     </div>
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Categoria">
         <option value="">Categoría</option>
         <option value="LINEA BLANCA">LINEA BLANCA</option>
         <option value="MENAJE">MENAJE</option>
       </select>
     </div>
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Ano">
         <option value="">Año</option>
         <option value="2018">2018</option>
         <option value="2017">2017</option>
       </select>
     </div>
     <div class="col-2 text-right">
       <select class="form-control form-control-sm" formControlName="Mes">
         <option value="0">Mes</option>
         <option value="01">enero</option>
         <option value="02">febrero</option>
         <option value="03">marzo</option>
         <option value="04">abril</option>
         <option value="05">mayo</option>
         <option value="06">junio</option>
         <option value="07">julio</option>
         <option value="08">agosto</option>
         <option value="09">septiembre</option>
         <option value="10">octubre</option>
         <option value="11">noviembre</option>
         <option value="12">diciembre</option>
       </select>
     </div>
   </div>
   <div class="row mt-3">
     <div class="col-10 text-center">
       &nbsp;
     </div>
     <div class="col-2 text-center">
       <a class="btn btn-sm btnicono" (click)="filtrarReporte()"> Filtrar </a>
     </div>
   </div>
   </form-->
  <hr>
   <div>
     <div class="overflow">
       <table datatable [dtOptions]="this.dtOptions" [dtTrigger]="trigger"  id="tabla" class="table table-striped table-bordered">
           <thead>
           <tr>
             <th>#</th>
             <th>Mes</th>
             <th>Categoría</th>
             <th *ngIf="_global.user.nivel!='distribuidor'">Garantia de Partes</th>
             <th *ngIf="_global.user.nivel!='distribuidor'">Garantia de M.O. & Kms</th>
             <th *ngIf="_global.user.nivel!='distribuidor'">Reembolso Garantia FEE </th>
             <th>Garantia de Cambios y Reemplazo</th>
             <th *ngIf="_global.user.nivel!='distribuidor'">Monto USD</th>
             <th>Status</th>
             <th>Comprobante</th>
           </tr>
           </thead>
           <tbody>
             <tr>
               <td></td>
               <td></td>
               <td></td>
               <td *ngIf="_global.user.nivel!='distribuidor'">
                 Cta # 7210000026
               </td>
               <td *ngIf="_global.user.nivel!='distribuidor'">
                 Cta # 7210000027
               </td>
               <td *ngIf="_global.user.nivel!='distribuidor'">
                 Cta # 7210000030
               </td>
               <td>
                  Cta # 7210000028
               </td>
               <td *ngIf="_global.user.nivel!='distribuidor'"></td>
               <td></td>
               <td></td>
             </tr>
           <tr *ngFor="let item of _global.pagos.objpagos;">
             <td>
               {{item.detalle.id}}
             </td>
             <td>
               {{item.detalle.Mes}} {{item.detalle.Ano}}
             </td>
             <td>
               {{item.detalle.Categoria}}
             </td>
             <td *ngIf="_global.user.nivel!='distribuidor'">
               {{item.cuentas.MontoRefacciones | currency}}
             </td>
             <td *ngIf="_global.user.nivel!='distribuidor'">
               {{item.cuentas.MontoTAMov | currency}}
             </td>
             <td *ngIf="_global.user.nivel!='distribuidor'">
               {{item.cuentas.MontoFee | currency}}
             </td>
             <td>
               {{item.cuentas.MontoCambio | currency}}
             </td>
             <td *ngIf="_global.user.nivel!='distribuidor'">
               {{item.cuentas.MontoTotal | currency}}
             </td>
             <td>
               {{item.detalle.StatusPago}}
             </td>
             <td>
               <a *ngIf="item.detalle.Comprobante=='Pago sin realizar' && _global.user.nivel=='administrador'" class="btn btn-sm btnicono" (click)="iniciarCargaComprobante(item.detalle.id, item.detalle.Mes, item.detalle.Ano, item.detalle.Categoria, item.detalle.MontoTotal, item.detalle.Comprobante, item.detalle.FechaRegistro)"> Subir comprobante </a>
               <a href="{{_global.base}}administracion/uploads-pagos/{{item.detalle.Comprobante}}" target="_blank" *ngIf="item.detalle.Comprobante!='Pago sin realizar'">Ver</a>
               <span *ngIf="item.detalle.Comprobante=='Pago sin realizar' && _global.user.nivel!='administrador'">Pago sin realizar</span>
             </td>
           </tr>
           </tbody>
        </table>
     </div>
   </div>
   <div class="row mt-3" *ngIf="this.statusPago == 'Cargar'">
    <div class="col-6">
      <h2>DATOS DE PAGO</h2>
    </div>
  </div>
  <div class="row my-2" *ngIf="this.statusPago == 'Cargar'">
    <div class="col-6">
      Mes: <b>{{this.mesPago}}</b><br>
      Categoría: <b>{{this.categoriaPago}}</b><br>
      Monto: <b>{{this.montoPago | currency}} USD</b><br>
      Fecha de registro: <b>{{this.fechaRegistroPago}}</b><br>
    </div>
    <div class="col-6">
      <form class="formulario formularioCotizacion my-3" name="formulariopagos" [formGroup]="pagosForm" (ngSubmit)="submitCambiastatusPago()" *ngIf="this.statusPago=='Cargar'">
        <ng2-file-input (onAction)="onActionComprobante($event)" ></ng2-file-input>
        <span class="alert alert-danger" *ngIf="this.AdjuntosComprobanteLenght==0 && this.adjuntosValidos==false">
          Este campo es requerido
        </span>


        <br>
        <button class="btn btn-sm" type="submit">Guardar</button>
      </form>
    </div>
  </div>
